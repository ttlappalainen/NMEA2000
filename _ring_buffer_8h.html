<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="NMEA2000 C++ library" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Library to handle NMEA 2000 Communication written in C++." />
<meta property="og:url" content="https://github.com/ttlappalainen/NMEA2000" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="NMEA2000 C++ library" />
<meta name="twitter:description" content="Library to handle NMEA 2000 Communication written in C++." />
<!-- END twitter metadata -->
<title>NMEA2000 Library: RingBuffer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo_sqare1.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-custom-alternative.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/ttlappalainen/NMEA2000" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_s.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NMEA2000 Library
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Library to handle NMEA 2000 Communication written in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_ring_buffer_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">RingBuffer.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Simple <a class="el" href="classt_ring_buffer.html" title="Template Class that holds values in a ring buffer.">tRingBuffer</a> and <a class="el" href="classt_priority_ring_buffer.html" title="Template Class that holds values with given priorities in a ring buffer.">tPriorityRingBuffer</a> template classes.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;cstdint&gt;</code><br />
<code>#include &quot;RingBuffer.tpp&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for RingBuffer.h:</div>
<div class="dyncontent">
<div class="center"><img src="_ring_buffer_8h__incl.png" border="0" usemap="#a_ring_buffer_8h" alt=""/></div>
<map name="a_ring_buffer_8h" id="a_ring_buffer_8h">
<area shape="rect" title="Simple tRingBuffer and tPriorityRingBuffer template classes." alt="" coords="43,5,135,32"/>
<area shape="rect" title=" " alt="" coords="5,80,67,107"/>
<area shape="rect" title=" " alt="" coords="91,80,194,107"/>
</map>
</div>
</div>
<p><a href="_ring_buffer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classt_priority_ring_buffer.html">tPriorityRingBuffer&lt; T &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Template Class that holds values with given priorities in a ring buffer.  <a href="classt_priority_ring_buffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structt_priority_ring_buffer_1_1t_priority_ref.html">tPriorityRingBuffer&lt; T &gt;::tPriorityRef</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure handles meta data for each priority.  <a href="structt_priority_ring_buffer_1_1t_priority_ref.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structt_priority_ring_buffer_1_1t_value_slot.html">tPriorityRingBuffer&lt; T &gt;::tValueSlot</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure that holds the actual value and meta data.  <a href="structt_priority_ring_buffer_1_1t_value_slot.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classt_ring_buffer.html">tRingBuffer&lt; T &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Template Class that holds values in a ring buffer.  <a href="classt_ring_buffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1fbddfabf1f38e3fd8bb379bfcbbc0d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ring_buffer_8h.html#a1fbddfabf1f38e3fd8bb379bfcbbc0d6">INVALID_PRIORITY_REF</a>&#160;&#160;&#160;(uint8_t)(-1)</td></tr>
<tr class="memdesc:a1fbddfabf1f38e3fd8bb379bfcbbc0d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant for an invalid priority reference.  <a href="_ring_buffer_8h.html#a1fbddfabf1f38e3fd8bb379bfcbbc0d6">More...</a><br /></td></tr>
<tr class="separator:a1fbddfabf1f38e3fd8bb379bfcbbc0d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6de79769f236ca18dcaa79024b5991"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ring_buffer_8h.html#a5c6de79769f236ca18dcaa79024b5991">INVALID_RING_REF</a>&#160;&#160;&#160;(uint16_t)(-1)</td></tr>
<tr class="memdesc:a5c6de79769f236ca18dcaa79024b5991"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant for an invalid index reference for the buffer.  <a href="_ring_buffer_8h.html#a5c6de79769f236ca18dcaa79024b5991">More...</a><br /></td></tr>
<tr class="separator:a5c6de79769f236ca18dcaa79024b5991"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Simple <a class="el" href="classt_ring_buffer.html" title="Template Class that holds values in a ring buffer.">tRingBuffer</a> and <a class="el" href="classt_priority_ring_buffer.html" title="Template Class that holds values with given priorities in a ring buffer.">tPriorityRingBuffer</a> template classes. </p>
<p >With <a class="el" href="classt_ring_buffer.html" title="Template Class that holds values in a ring buffer.">tRingBuffer</a> one can save values to a ring buffer. Value can be simple value or data structure.</p>
<dl class="section note"><dt>Note</dt><dd>You have to take care of data locking from other threads or interrupts around calls using buffer handling routines.</dd></dl>
<h1><a class="anchor" id="subSecRBU"></a>
Example of ring buffer usage</h1>
<div class="fragment"><div class="line"><span class="keyword">struct </span>tCANData {</div>
<div class="line">  uint32_t id;</div>
<div class="line">  uint8_t len;</div>
<div class="line">  uint8_t data[8];</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classt_priority_ring_buffer.html">tPriorityRingBuffer&lt;tCANData&gt;</a> CANMessages(100);</div>
<div class="line">...</div>
<div class="line">void SendMessage() {</div>
<div class="line">  tCANData msgOut;</div>
<div class="line">  msgOut.id=1;</div>
<div class="line">  msgOut.len=1;</div>
<div class="line">  msgOut.data[0]=1;</div>
<div class="line">  lockData();</div>
<div class="line">  CANMessages.add(msgOut);</div>
<div class="line">  releaseData();</div>
<div class="line">}</div>
<div class="ttc" id="aclasst_priority_ring_buffer_html"><div class="ttname"><a href="classt_priority_ring_buffer.html">tPriorityRingBuffer</a></div><div class="ttdoc">Template Class that holds values with given priorities in a ring buffer.</div><div class="ttdef"><b>Definition:</b> <a href="_ring_buffer_8h_source.html#l00255">RingBuffer.h:255</a></div></div>
</div><!-- fragment --><p >As an alternative if you want to avoid data copying twice, you can request pointer to next value to be saved and copy data directly to it.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> SendMessage() {</div>
<div class="line">  tCANData *msgOut;</div>
<div class="line">  lockData();</div>
<div class="line">  <span class="keywordflow">if</span> ( (msgOut=CANMessages.getAddRef())!=0 ) {</div>
<div class="line">    msgOut-&gt;id=1;</div>
<div class="line">    msgOut-&gt;len=1;</div>
<div class="line">    msgOut-&gt;data[0]=1;</div>
<div class="line">  }</div>
<div class="line">  releaseData();</div>
<div class="line">}</div>
</div><!-- fragment --><p ><a class="el" href="classt_priority_ring_buffer.html" title="Template Class that holds values with given priorities in a ring buffer.">tPriorityRingBuffer</a> is similar as <a class="el" href="classt_ring_buffer.html" title="Template Class that holds values in a ring buffer.">tRingBuffer</a>, but it extends functionality with value priority. When you add values to buffer, you can give them priority and when during read you can define which priority value should be read out or read highest priority value.</p>
<h3><a class="anchor" id="autotoc_md279"></a>
Debugging</h3>
<p >To improve the debugging of the module there is the possibility to enable some print out to the DebugStream</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define RING_BUFFER_ERROR_DEBUG</span></div>
<div class="line"><span class="preprocessor">#define RING_BUFFER_DEBUG</span></div>
<div class="line"><span class="preprocessor">#define RING_BUFFER_INIT_DEBUG</span></div>
</div><!-- fragment --> 
<p class="definition">Definition in file <a class="el" href="_ring_buffer_8h_source.html">RingBuffer.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1fbddfabf1f38e3fd8bb379bfcbbc0d6" name="a1fbddfabf1f38e3fd8bb379bfcbbc0d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fbddfabf1f38e3fd8bb379bfcbbc0d6">&#9670;&nbsp;</a></span>INVALID_PRIORITY_REF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVALID_PRIORITY_REF&#160;&#160;&#160;(uint8_t)(-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constant for an invalid priority reference. </p>

<p class="definition">Definition at line <a class="el" href="_ring_buffer_8h_source.html#l00260">260</a> of file <a class="el" href="_ring_buffer_8h_source.html">RingBuffer.h</a>.</p>

</div>
</div>
<a id="a5c6de79769f236ca18dcaa79024b5991" name="a5c6de79769f236ca18dcaa79024b5991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c6de79769f236ca18dcaa79024b5991">&#9670;&nbsp;</a></span>INVALID_RING_REF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVALID_RING_REF&#160;&#160;&#160;(uint16_t)(-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constant for an invalid index reference for the buffer. </p>

<p class="definition">Definition at line <a class="el" href="_ring_buffer_8h_source.html#l00258">258</a> of file <a class="el" href="_ring_buffer_8h_source.html">RingBuffer.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->

<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="_ring_buffer_8h.html">RingBuffer.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
